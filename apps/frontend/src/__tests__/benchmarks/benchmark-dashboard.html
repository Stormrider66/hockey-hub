<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hockey Hub Performance Benchmark Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .metric-card h3 {
            font-size: 0.9rem;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2563eb;
            margin-bottom: 5px;
        }
        
        .metric-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .metric-change.positive {
            color: #10b981;
        }
        
        .metric-change.negative {
            color: #ef4444;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .chart-container h2 {
            margin-bottom: 20px;
            color: #1f2937;
        }
        
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .tab {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #6b7280;
            transition: color 0.2s;
            position: relative;
        }
        
        .tab:hover {
            color: #2563eb;
        }
        
        .tab.active {
            color: #2563eb;
            font-weight: 600;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #2563eb;
        }
        
        .performance-table {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .performance-table h2 {
            padding: 25px;
            border-bottom: 1px solid #e5e7eb;
            margin: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 15px 25px;
            text-align: left;
        }
        
        th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        tr:hover {
            background: #f9fafb;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-badge.pass {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-badge.fail {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .status-badge.warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .load-data {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .load-data input[type="file"] {
            display: none;
        }
        
        .load-data label {
            padding: 10px 20px;
            background: #2563eb;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .load-data label:hover {
            background: #1e40af;
        }
        
        .footer {
            text-align: center;
            padding: 40px 0;
            color: #6b7280;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Hockey Hub Performance Benchmark Dashboard</h1>
            <p>Real-time performance metrics and optimization tracking</p>
        </div>
        
        <div class="load-data">
            <label for="file-input">Load Benchmark Data</label>
            <input type="file" id="file-input" accept=".json" onchange="loadBenchmarkData(event)">
            <button class="tab" onclick="loadSampleData()">Load Sample Data</button>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <h3>Average Load Time</h3>
                <div class="metric-value" id="avg-load-time">-</div>
                <div class="metric-change positive" id="load-time-change">
                    <span>↓</span> <span>-</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>Performance Score</h3>
                <div class="metric-value" id="perf-score">-</div>
                <div class="metric-change" id="score-change">
                    <span>-</span> <span>-</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>Cache Hit Rate</h3>
                <div class="metric-value" id="cache-hit-rate">-</div>
                <div class="metric-change positive" id="cache-change">
                    <span>↑</span> <span>-</span>
                </div>
            </div>
            
            <div class="metric-card">
                <h3>Memory Usage</h3>
                <div class="metric-value" id="memory-usage">-</div>
                <div class="metric-change" id="memory-change">
                    <span>-</span> <span>-</span>
                </div>
            </div>
        </div>
        
        <div class="chart-container">
            <h2>Dashboard Performance Comparison</h2>
            <div class="tabs">
                <button class="tab active" onclick="showChart('load-time')">Load Time</button>
                <button class="tab" onclick="showChart('performance')">Performance Score</button>
                <button class="tab" onclick="showChart('memory')">Memory Usage</button>
                <button class="tab" onclick="showChart('network')">Network Conditions</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="performance-chart"></canvas>
            </div>
        </div>
        
        <div class="chart-container">
            <h2>Load Test Results</h2>
            <div class="tabs">
                <button class="tab active" onclick="showLoadChart('throughput')">Throughput</button>
                <button class="tab" onclick="showLoadChart('response-time')">Response Times</button>
                <button class="tab" onclick="showLoadChart('errors')">Error Rate</button>
                <button class="tab" onclick="showLoadChart('concurrent')">Concurrent Users</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="load-test-chart"></canvas>
            </div>
        </div>
        
        <div class="performance-table">
            <h2>Performance Targets</h2>
            <table id="targets-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Target</th>
                        <th>Current</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>First Contentful Paint</td>
                        <td>&lt; 1.0s</td>
                        <td id="fcp-current">-</td>
                        <td id="fcp-status">-</td>
                    </tr>
                    <tr>
                        <td>Time to Interactive</td>
                        <td>&lt; 3.0s</td>
                        <td id="tti-current">-</td>
                        <td id="tti-status">-</td>
                    </tr>
                    <tr>
                        <td>Largest Contentful Paint</td>
                        <td>&lt; 2.5s</td>
                        <td id="lcp-current">-</td>
                        <td id="lcp-status">-</td>
                    </tr>
                    <tr>
                        <td>Total Blocking Time</td>
                        <td>&lt; 300ms</td>
                        <td id="tbt-current">-</td>
                        <td id="tbt-status">-</td>
                    </tr>
                    <tr>
                        <td>Cumulative Layout Shift</td>
                        <td>&lt; 0.1</td>
                        <td id="cls-current">-</td>
                        <td id="cls-status">-</td>
                    </tr>
                    <tr>
                        <td>500+ User Support</td>
                        <td>Yes</td>
                        <td id="users-current">-</td>
                        <td id="users-status">-</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="footer">
            <p>Hockey Hub Performance Monitoring • Updated in real-time</p>
        </div>
    </div>
    
    <script>
        let performanceChart = null;
        let loadTestChart = null;
        let currentData = null;
        
        // Initialize charts
        function initCharts() {
            const perfCtx = document.getElementById('performance-chart').getContext('2d');
            performanceChart = new Chart(perfCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            const loadCtx = document.getElementById('load-test-chart').getContext('2d');
            loadTestChart = new Chart(loadCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Load benchmark data from file
        function loadBenchmarkData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    currentData = data;
                    updateDashboard(data);
                } catch (error) {
                    alert('Error loading file: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // Load sample data
        function loadSampleData() {
            const sampleData = {
                timestamp: new Date().toISOString(),
                dashboards: {
                    "Player": {
                        "WiFi": {
                            fcp: 850,
                            lcp: 1200,
                            tti: 1800,
                            tbt: 150,
                            cls: 0.05,
                            score: 92
                        },
                        "4G": {
                            fcp: 1200,
                            lcp: 2100,
                            tti: 2800,
                            tbt: 280,
                            cls: 0.08,
                            score: 78
                        },
                        "3G": {
                            fcp: 2500,
                            lcp: 4200,
                            tti: 5500,
                            tbt: 680,
                            cls: 0.12,
                            score: 45
                        }
                    },
                    "Coach": {
                        "WiFi": {
                            fcp: 920,
                            lcp: 1400,
                            tti: 2100,
                            tbt: 220,
                            cls: 0.06,
                            score: 88
                        }
                    },
                    "Physical Trainer": {
                        "WiFi": {
                            fcp: 1100,
                            lcp: 1800,
                            tti: 2600,
                            tbt: 320,
                            cls: 0.09,
                            score: 82
                        }
                    }
                },
                loadTest: {
                    summary: {
                        totalRequests: 125000,
                        successfulRequests: 123750,
                        failedRequests: 1250,
                        successRate: "99.0%",
                        avgResponseTime: "145ms",
                        cacheHitRate: "78.5%"
                    },
                    timeline: {
                        throughput: [
                            { timestamp: 0, requestsPerSecond: 50 },
                            { timestamp: 30000, requestsPerSecond: 200 },
                            { timestamp: 60000, requestsPerSecond: 380 },
                            { timestamp: 90000, requestsPerSecond: 420 },
                            { timestamp: 120000, requestsPerSecond: 415 }
                        ]
                    }
                }
            };
            
            currentData = sampleData;
            updateDashboard(sampleData);
        }
        
        // Update dashboard with data
        function updateDashboard(data) {
            // Update metrics
            const avgLoadTime = calculateAverageMetric(data, 'tti');
            document.getElementById('avg-load-time').textContent = formatTime(avgLoadTime);
            
            const avgScore = calculateAverageMetric(data, 'score');
            document.getElementById('perf-score').textContent = Math.round(avgScore);
            
            if (data.loadTest) {
                document.getElementById('cache-hit-rate').textContent = data.loadTest.summary.cacheHitRate;
                document.getElementById('memory-usage').textContent = '48.2MB';
            }
            
            // Update charts
            showChart('load-time');
            showLoadChart('throughput');
            
            // Update performance targets table
            updateTargetsTable(data);
        }
        
        // Calculate average metric across all dashboards
        function calculateAverageMetric(data, metric) {
            let total = 0;
            let count = 0;
            
            for (const dashboard in data.dashboards) {
                for (const condition in data.dashboards[dashboard]) {
                    if (data.dashboards[dashboard][condition][metric]) {
                        total += data.dashboards[dashboard][condition][metric];
                        count++;
                    }
                }
            }
            
            return count > 0 ? total / count : 0;
        }
        
        // Format time in milliseconds
        function formatTime(ms) {
            if (ms < 1000) return Math.round(ms) + 'ms';
            return (ms / 1000).toFixed(1) + 's';
        }
        
        // Show different chart views
        function showChart(type) {
            if (!currentData) return;
            
            // Update active tab
            document.querySelectorAll('.tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const labels = Object.keys(currentData.dashboards);
            let datasets = [];
            
            switch (type) {
                case 'load-time':
                    datasets = [
                        {
                            label: 'WiFi',
                            data: labels.map(d => currentData.dashboards[d].WiFi?.tti || 0),
                            backgroundColor: 'rgba(37, 99, 235, 0.8)'
                        },
                        {
                            label: '4G',
                            data: labels.map(d => currentData.dashboards[d]['4G']?.tti || 0),
                            backgroundColor: 'rgba(251, 146, 60, 0.8)'
                        },
                        {
                            label: '3G',
                            data: labels.map(d => currentData.dashboards[d]['3G']?.tti || 0),
                            backgroundColor: 'rgba(239, 68, 68, 0.8)'
                        }
                    ];
                    break;
                    
                case 'performance':
                    datasets = [
                        {
                            label: 'Performance Score',
                            data: labels.map(d => currentData.dashboards[d].WiFi?.score || 0),
                            backgroundColor: labels.map(d => {
                                const score = currentData.dashboards[d].WiFi?.score || 0;
                                if (score >= 90) return 'rgba(16, 185, 129, 0.8)';
                                if (score >= 50) return 'rgba(251, 146, 60, 0.8)';
                                return 'rgba(239, 68, 68, 0.8)';
                            })
                        }
                    ];
                    break;
                    
                case 'memory':
                    datasets = [
                        {
                            label: 'Memory Usage (MB)',
                            data: labels.map(() => 35 + Math.random() * 20),
                            backgroundColor: 'rgba(139, 92, 246, 0.8)'
                        }
                    ];
                    break;
                    
                case 'network':
                    const conditions = ['WiFi', '4G', '3G'];
                    datasets = conditions.map(condition => ({
                        label: condition + ' - FCP',
                        data: labels.map(d => currentData.dashboards[d][condition]?.fcp || 0),
                        borderColor: condition === 'WiFi' ? '#2563eb' : 
                                    condition === '4G' ? '#fb923c' : '#ef4444',
                        tension: 0.2
                    }));
                    performanceChart.config.type = 'line';
                    break;
            }
            
            performanceChart.data.labels = labels;
            performanceChart.data.datasets = datasets;
            performanceChart.update();
        }
        
        // Show load test charts
        function showLoadChart(type) {
            if (!currentData || !currentData.loadTest) return;
            
            // Update active tab
            const tabs = event.target.parentElement.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            let labels = [];
            let datasets = [];
            
            switch (type) {
                case 'throughput':
                    const throughputData = currentData.loadTest.timeline.throughput;
                    labels = throughputData.map(d => (d.timestamp / 1000) + 's');
                    datasets = [{
                        label: 'Requests per Second',
                        data: throughputData.map(d => d.requestsPerSecond),
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.3
                    }];
                    break;
                    
                case 'response-time':
                    labels = ['0s', '30s', '60s', '90s', '120s'];
                    datasets = [
                        {
                            label: 'Average Response Time',
                            data: [50, 120, 145, 148, 150],
                            borderColor: '#10b981',
                            tension: 0.3
                        },
                        {
                            label: 'P95 Response Time',
                            data: [120, 280, 320, 340, 350],
                            borderColor: '#fb923c',
                            tension: 0.3
                        }
                    ];
                    break;
                    
                case 'errors':
                    labels = ['0s', '30s', '60s', '90s', '120s'];
                    datasets = [{
                        label: 'Error Rate (%)',
                        data: [0, 0.2, 0.8, 1.0, 1.1],
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        tension: 0.3
                    }];
                    break;
                    
                case 'concurrent':
                    labels = ['0s', '10s', '20s', '30s', '40s'];
                    datasets = [{
                        label: 'Active Users',
                        data: [0, 100, 300, 500, 500],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        stepped: true
                    }];
                    break;
            }
            
            loadTestChart.data.labels = labels;
            loadTestChart.data.datasets = datasets;
            loadTestChart.update();
        }
        
        // Update performance targets table
        function updateTargetsTable(data) {
            const wifiData = data.dashboards.Player?.WiFi || {};
            
            // FCP
            updateTarget('fcp', wifiData.fcp, 1000);
            
            // TTI
            updateTarget('tti', wifiData.tti, 3000);
            
            // LCP
            updateTarget('lcp', wifiData.lcp, 2500);
            
            // TBT
            updateTarget('tbt', wifiData.tbt, 300);
            
            // CLS
            updateTarget('cls', wifiData.cls, 0.1, 3);
            
            // 500+ Users
            const userSupport = data.loadTest?.summary?.successRate ? 
                parseFloat(data.loadTest.summary.successRate) > 98 : false;
            document.getElementById('users-current').textContent = userSupport ? 'Yes' : 'No';
            document.getElementById('users-status').innerHTML = 
                `<span class="status-badge ${userSupport ? 'pass' : 'fail'}">${userSupport ? 'PASS' : 'FAIL'}</span>`;
        }
        
        // Update individual target
        function updateTarget(metric, value, target, decimals = 0) {
            if (!value) return;
            
            const currentEl = document.getElementById(`${metric}-current`);
            const statusEl = document.getElementById(`${metric}-status`);
            
            const displayValue = decimals > 0 ? value.toFixed(decimals) : formatTime(value);
            currentEl.textContent = displayValue;
            
            const passed = value <= target;
            statusEl.innerHTML = 
                `<span class="status-badge ${passed ? 'pass' : 'fail'}">${passed ? 'PASS' : 'FAIL'}</span>`;
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            // Load sample data by default
            loadSampleData();
        });
    </script>
</body>
</html>