<!DOCTYPE html>
<html>
<head>
    <title>Reset Hockey Hub Language</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        button {
            background-color: #0070f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
            font-size: 16px;
        }
        button:hover {
            background-color: #0051cc;
        }
        .success {
            color: green;
            margin-top: 10px;
            font-weight: bold;
        }
        .current {
            background-color: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Reset Hockey Hub Language Settings</h1>
    
    <div class="current">
        <strong>Current Language:</strong> <span id="currentLang">Loading...</span>
    </div>
    
    <button onclick="setEnglish()">Set Language to English</button>
    <button onclick="clearLanguageCache()">Clear Language Cache</button>
    <button onclick="fullReset()">Full Reset (Recommended)</button>
    
    <div id="status"></div>
    
    <script>
        // Show current language
        const currentLang = localStorage.getItem('i18nextLng');
        document.getElementById('currentLang').textContent = currentLang || 'Not set';
        
        function setEnglish() {
            localStorage.setItem('i18nextLng', 'en');
            document.getElementById('status').innerHTML = '<div class="success">✅ Language set to English. Please refresh the Hockey Hub page.</div>';
            updateCurrentLang();
        }
        
        function clearLanguageCache() {
            // Clear all i18next related items
            const keysToRemove = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && (key.includes('i18next') || key.includes('lng'))) {
                    keysToRemove.push(key);
                }
            }
            
            keysToRemove.forEach(key => localStorage.removeItem(key));
            
            document.getElementById('status').innerHTML = '<div class="success">✅ Language cache cleared. Please refresh the Hockey Hub page.</div>';
            updateCurrentLang();
        }
        
        function fullReset() {
            // Clear language cache
            clearLanguageCache();
            
            // Set to English
            localStorage.setItem('i18nextLng', 'en');
            
            // Clear any Redux persist state that might contain language
            try {
                const persistRoot = localStorage.getItem('persist:root');
                if (persistRoot) {
                    const parsed = JSON.parse(persistRoot);
                    // Remove any language-related state
                    delete parsed.language;
                    delete parsed.i18n;
                    localStorage.setItem('persist:root', JSON.stringify(parsed));
                }
            } catch (e) {
                console.error('Error clearing Redux state:', e);
            }
            
            document.getElementById('status').innerHTML = '<div class="success">✅ Full reset complete! Language set to English.<br><br>Now please:<br>1. Go back to Hockey Hub<br>2. Hard refresh (Ctrl+F5 or Cmd+Shift+R)</div>';
            updateCurrentLang();
        }
        
        function updateCurrentLang() {
            const newLang = localStorage.getItem('i18nextLng');
            document.getElementById('currentLang').textContent = newLang || 'Not set';
        }
    </script>
</body>
</html>