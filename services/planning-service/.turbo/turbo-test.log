
> planning-service@1.0.0 test C:\Hockey Hub\services\planning-service
> jest --runInBand --config jest.config.ts

  console.error
    [Validation Error] [
      {
        "path": "body.playerId",
        "message": "Required"
      },
      {
        "path": "body.seasonId",
        "message": "Required"
      },
      {
        "path": "body.title",
        "message": "Title is required"
      }
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
      at rejected (src/middleware/validateRequest.ts:6:65)

  console.error
    [Validation Error] [
      {
        "path": "body.playerId",
        "message": "Invalid Player ID format"
      },
      {
        "path": "body.seasonId",
        "message": "Invalid Season ID format"
      }
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
      at rejected (src/middleware/validateRequest.ts:6:65)

PASS tests/integration/developmentPlan.test.ts (27.178 s)
  Development Plan Routes (/api/v1/development-plans)
    POST /
      âˆš should create a new development plan with valid data (258 ms)
      âˆš should return 400 Bad Request if required fields are missing (127 ms)
      âˆš should return 400 Bad Request for invalid UUID formats (31 ms)
  List & Get created plan
    âˆš should return list including the new plan (44 ms)
    âˆš should fetch plan by id (20 ms)
  Update & delete plan
    âˆš updates plan title (19 ms)
    âˆš adds, updates and deletes an item (85 ms)
    âˆš deletes plan (35 ms)

  console.log
    [Mock CreateSeason] Input data: {
      organizationId: 'mock-org-id',
      name: 'Test Season',
      startDate: 2025-01-01T00:00:00.000Z,
      endDate: 2025-12-31T23:59:59.000Z,
      status: undefined
    }

      at tests/integration/test-setup.ts:138:15

  console.log
    [Mock CreateSeason] Stored entity: {
      organizationId: 'mock-org-id',
      name: 'Test Season',
      startDate: 2025-01-01T00:00:00.000Z,
      endDate: 2025-12-31T23:59:59.000Z,
      status: 'planning',
      id: '1eeb545b-f0b0-49ad-8bac-318aa8ede3db'
    }

      at tests/integration/test-setup.ts:139:15

  console.error
    [Validation Error] [
      {
        "path": "body.name",
        "message": "Phase name is required"
      },
      {
        "path": "body.startDate",
        "message": "Required"
      },
      {
        "path": "body.endDate",
        "message": "Required"
      }
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
      at rejected (src/middleware/validateRequest.ts:6:65)

PASS tests/integration/seasonPhase.test.ts
  Season Phase Routes (/api/v1/seasons/:seasonId/phases)
    POST /
      âˆš creates phase with valid data (131 ms)
      âˆš returns 400 for missing fields (19 ms)
      âˆš returns 400 when phase dates outside season range (17 ms)
      âˆš returns 409 for overlapping phases (37 ms)
    GET /
      âˆš returns list containing created phases (347 ms)
    PUT /:phaseId
      âˆš updates phase name (43 ms)
    DELETE /:phaseId
      âˆš deletes phase (187 ms)

  console.log
    [Mock CreateSeason] Input data: {
      organizationId: 'mock-org-id',
      name: 'Season 2025',
      startDate: 2025-01-01T00:00:00.000Z,
      endDate: 2025-12-31T23:59:59.000Z,
      status: undefined
    }

      at tests/integration/test-setup.ts:138:15

  console.log
    [Mock CreateSeason] Stored entity: {
      organizationId: 'mock-org-id',
      name: 'Season 2025',
      startDate: 2025-01-01T00:00:00.000Z,
      endDate: 2025-12-31T23:59:59.000Z,
      status: 'planning',
      id: '8092ee17-d397-4a02-9010-009980471777'
    }

      at tests/integration/test-setup.ts:139:15

  console.log
    Season created in beforeAll with ID: 8092ee17-d397-4a02-9010-009980471777

      at tests/integration/season.test.ts:22:11

  console.log
    [Mock CreateSeason] Input data: {
      organizationId: 'mock-org-id',
      name: 'Season 2026',
      startDate: 2026-01-01T00:00:00.000Z,
      endDate: 2026-12-31T23:59:59.000Z,
      status: undefined
    }

      at tests/integration/test-setup.ts:138:15

  console.log
    [Mock CreateSeason] Stored entity: {
      organizationId: 'mock-org-id',
      name: 'Season 2026',
      startDate: 2026-01-01T00:00:00.000Z,
      endDate: 2026-12-31T23:59:59.000Z,
      status: 'planning',
      id: '7fc25e12-bc23-4dd2-8ff5-fb24b3b949a8'
    }

      at tests/integration/test-setup.ts:139:15

  console.error
    [Validation Error] [
      {
        "path": "body.name",
        "message": "Season name is required"
      },
      {
        "path": "body.startDate",
        "message": "Start date is required"
      },
      {
        "path": "body.endDate",
        "message": "End date is required"
      }
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
      at rejected (src/middleware/validateRequest.ts:6:65)

  console.error
    [Validation Error] [
      {
        "path": "body.name",
        "message": "Season name must be at least 3 characters long"
      },
      {
        "path": "body.startDate",
        "message": "Invalid date-time string! Must be UTC."
      },
      {
        "path": "body.endDate",
        "message": "End date cannot be earlier than start date"
      }
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
      at rejected (src/middleware/validateRequest.ts:6:65)

  console.log
    Using season ID (GET /): 8092ee17-d397-4a02-9010-009980471777

      at tests/integration/season.test.ts:77:15

  console.log
    Using season ID (GET /:id): 8092ee17-d397-4a02-9010-009980471777

      at tests/integration/season.test.ts:89:15

  console.error
    [TEST ERROR][NotFoundError] (404): Season not found or not accessible

    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at tests/integration/test-setup.ts:311:21
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:265:14)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:141:14)
      at src/controllers/seasonController.ts:87:9
      at fulfilled (src/controllers/seasonController.ts:28:58)

  console.log
    Using season ID (PUT /:id): 8092ee17-d397-4a02-9010-009980471777

      at tests/integration/season.test.ts:103:15

  console.log
    [Mock CreateSeason] Input data: {
      organizationId: 'mock-org-id',
      name: 'Season To Delete',
      startDate: 2027-01-01T00:00:00.000Z,
      endDate: 2027-12-31T23:59:59.000Z,
      status: undefined
    }

      at tests/integration/test-setup.ts:138:15

  console.log
    [Mock CreateSeason] Stored entity: {
      organizationId: 'mock-org-id',
      name: 'Season To Delete',
      startDate: 2027-01-01T00:00:00.000Z,
      endDate: 2027-12-31T23:59:59.000Z,
      status: 'planning',
      id: 'e7b67ef7-2280-4207-86b4-695b6875fe38'
    }

      at tests/integration/test-setup.ts:139:15

  console.log
    Using temp season ID for DELETE: e7b67ef7-2280-4207-86b4-695b6875fe38

      at tests/integration/season.test.ts:126:17

  console.error
    [TEST ERROR][NotFoundError] (404): Season not found or not accessible

    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at tests/integration/test-setup.ts:311:21
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:265:14)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:141:14)
      at src/controllers/seasonController.ts:87:9
      at fulfilled (src/controllers/seasonController.ts:28:58)

  console.log
    Cleaned up season ID: 8092ee17-d397-4a02-9010-009980471777

      at tests/integration/season.test.ts:31:13
PASS tests/integration/season.test.ts

  Season Routes (/api/v1/seasons)
    POST /
      âˆš can create another season successfully (50 ms)
      âˆš returns 400 for missing fields (15 ms)
      âˆš returns 400 for invalid date (16 ms)
    GET /
      âˆš returns list containing the main created season (19 ms)
    GET /:id
      âˆš returns 200 for the main existing season (17 ms)
      âˆš returns 404 for non-existent id (23 ms)
    PUT /:id
      âˆš updates the main seasons name (23 ms)
    DELETE /:id
      âˆš cannot delete the main season as it is handled by afterAll (129 ms)

  console.error
    [TEST ERROR][ConflictError] (409): Training cycle dates overlap with an existing cycle in this phase

    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at tests/integration/test-setup.ts:311:21
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at Immediate.next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Immediate._onImmediate (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15)

  console.error
    [TEST ERROR][ValidationError] (400): Training cycle dates must be within the phase start and end dates

PASS tests/integration/trainingCycle.test.ts
    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
  Training Cycle End-to-End
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    âˆš creates cycle (206 ms)
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m
    âˆš lists cycles (15 ms)
    âˆš gets cycle by id (14 ms)
    âˆš updates cycle (14 ms)

    âˆš deletes cycle (9 ms)
      at tests/integration/test-setup.ts:311:21
    âˆš rejects overlapping cycle creation (78 ms)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
    âˆš rejects outside phase range (50 ms)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)

      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at Immediate.next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Immediate._onImmediate (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15)

  console.error
    [TEST ERROR][NotFoundError] (404): Development Plan with ID 00000000-0000-0000-0000-000000000000 not found

    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at tests/integration/test-setup.ts:311:21
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:265:14)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:141:14)
      at src/controllers/developmentPlanController.ts:145:9
          at Generator.throw (<anonymous>)
      at rejected (src/controllers/developmentPlanController.ts:6:65)

  console.error
    [Validation Error] [
      {
PASS tests/integration/listPlans.test.ts
        "path": "query.limit",
        "message": "Number must be greater than or equal to 1"
  GET /development-plans
      }
    âˆš returns empty list with 200 (21 ms)
    ]

    [0m [90m 23 |[39m                 message[33m:[39m err[33m.[39mmessage
     [90m 24 |[39m             }))[33m;[39m
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m'[Validation Error]'[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(formattedErrors[33m,[39m [36mnull[39m[33m,[39m [35m2[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mreturn[39m res[33m.[39mstatus([35m400[39m)[33m.[39mjson({
     [90m 27 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 28 |[39m                 code[33m:[39m [32m'VALIDATION_ERROR'[39m[33m,[39m[0m

      at src/middleware/validateRequest.ts:25:21
          at Generator.throw (<anonymous>)
    âˆš supports pagination query params (10 ms)
      at rejected (src/middleware/validateRequest.ts:6:65)

    âˆš returns 400 for invalid limit (14 ms)
  GET /development-plans/:id
    âˆš returns 404 when plan not found (68 ms)
  GET /development-plans with filters
    âˆš returns 200 even with status filter (17 ms)

  console.error
PASS tests/integration/teamGoal.test.ts
    [TEST ERROR][AuthorizationError] (403): Insufficient permissions to create a goal for this team.

    [0m [90m 309 |[39m     app[33m.[39muse((err[33m:[39m [33mError[39m[33m,[39m _req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m _next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
     [90m 310 |[39m         [36mif[39m (err [36minstanceof[39m [33mAppError[39m) {
    [31m[1m>[22m[39m[90m 311 |[39m             console[33m.[39merror([32m`[TEST ERROR][${err.name}] (${err.statusCode}): ${err.message}`[39m[33m,[39m err[33m.[39mdetails [33m||[39m [32m''[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
  Team Goal End-to-End
     [90m 312 |[39m             [36mreturn[39m res[33m.[39mstatus(err[33m.[39mstatusCode)[33m.[39mjson({
     [90m 313 |[39m                 error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 314 |[39m                 message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at tests/integration/test-setup.ts:311:21
    âˆš creates a Team Goal (62 ms)
    âˆš lists goals and includes the created goal (16 ms)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
    âˆš fetches the goal by id (12 ms)
    âˆš updates the goal status (17 ms)
    âˆš deletes the goal (27 ms)
    âˆš returns 403 when authorization fails (135 ms)

      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:326:13)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:346:12)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:280:10)
      at ../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:646:15
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/index.js:265:14)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:141:14)
      at src/controllers/goalController.ts:182:9
      at fulfilled (src/controllers/goalController.ts:28:58)

PASS tests/integration/playerGoal.test.ts
  Player Goal End-to-End
    âˆš creates a Player Goal (30 ms)
    âˆš lists player goals (17 ms)
    âˆš gets goal by id (8 ms)
    âˆš updates goal description (10 ms)
    âˆš deletes the goal (138 ms)

Test Suites: 7 passed, 7 total
Tests:       46 passed, 46 total
Snapshots:   0 total
Time:        41.169 s, estimated 54 s
Ran all test suites.
